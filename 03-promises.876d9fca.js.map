{"mappings":"0iBACAA,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQE,QACR,SAAyBC,EAAUC,GAC/B,KAAMD,aAAoBC,GACtB,MAAM,IAAIC,UAAU,oC,WCG5B,SAASC,EAAkBC,EAAQC,GAC/B,IAAI,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAI,CACjC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDhB,OAAOC,eAAeQ,EAAQI,EAAWI,IAAKJ,E,EAftDb,OAAOC,eAAeiB,EAAS,aAAc,CACzCf,OAAO,IAEXe,EAAQd,QACR,SAAsBE,EAAaa,EAAYC,GACvCD,GAAYX,EAAkBF,EAAYe,UAAWF,GACrDC,GAAaZ,EAAkBF,EAAac,GAChD,OAAOd,C,mBCgEX,IALG,W,sBAjEGgB,EACQC,G,IAAEC,EAAFD,EAAEC,QAASC,EAAXF,EAAWG,UAAWC,EAAtBJ,EAAsBK,S,aAChCC,KAAKL,QAAUA,EACfK,KAAKH,UAAYD,EACjBI,KAAKD,SAAWD,EAChBE,KAAKC,WAAa,KAClBD,KAAKE,SAAW,EAChBF,KAAKG,SAAW,C,iBAElBf,IAAA,O,MAAA,WACEY,KAAKI,c,IAEPhB,IAAA,e,MAAA,WACEY,KAAKL,QAAQU,iBAAiB,SAAUL,KAAKM,aAAaC,KAAKP,M,IAEjEZ,IAAA,e,MAAA,SAAaoB,G,WACXA,EAAMC,iBAEN,IAEuBC,EAAnBF,EAAMG,cADRC,SAAYC,EAAKH,EAALG,MAAOC,EAAIJ,EAAJI,KAAMC,EAAML,EAANK,OAErBC,EAAaC,OAAOJ,EAAMvC,OAC1B4C,EAAYD,OAAOH,EAAKxC,OACxB6C,EAAcF,OAAOF,EAAOzC,OAElC8C,YAAW,W,QACTC,EAAKnB,UAAYc,EACjBK,EAAKC,oBAELD,EAAKpB,WAAasB,aAAY,WAC5BC,EAAKrB,UAAY,EACjBqB,EAAKtB,UAAYgB,EAEbM,EAAKrB,SAAWgB,EAClBK,EAAKC,QAELD,EAAKF,mB,GAENJ,E,GACFF,E,IAEL5B,IAAA,oB,MAAA,WACEY,KAAK0B,cAAc1B,KAAKG,SAAUH,KAAKE,UACpCyB,KAAK3B,KAAKH,UAAUU,KAAKP,OACzB4B,MAAM5B,KAAKD,SAASQ,KAAKP,M,IAE9BZ,IAAA,gB,MAAA,SAAce,EAAUU,GACtB,OAAO,IAAIgB,SAAQ,SAACC,EAASC,GACLC,KAAKC,SAAW,GAGpCH,EAAQ,CAAE3B,WAAUU,UAEpBkB,EAAO,CAAE5B,WAAUU,S,OAIzBzB,IAAA,Q,MAAA,WACE8C,cAAclC,KAAKC,YACnBD,KAAKC,WAAa,KAClBD,KAAKE,SAAW,EAChBF,KAAKG,SAAW,C,OAIjB,GAKH,CALiB,CACfR,QAASwC,SAASC,cAAc,SAChCvC,UAMF,SAAmBH,G,IAAES,EAAFT,EAAES,SAAUU,EAAZnB,EAAYmB,MAC7BwB,EAAAC,GAASC,OAAOC,QAAQ,qBAAoCC,OAAftC,EAAS,QAAYsC,OAAN5B,EAAM,M,EANlEd,SASF,SAAkBL,G,IAAES,EAAFT,EAAES,SAAUU,EAAZnB,EAAYmB,MAC5BwB,EAAAC,GAASC,OAAOG,QAAQ,oBAAmCD,OAAftC,EAAS,QAAYsC,OAAN5B,EAAM,M,IAR3C8B,M","sources":["node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/js/03-promises.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","import Notiflix from 'notiflix';\n\nclass Generator {\n  constructor({ formRef, onResolve, onReject }) {\n    this.formRef = formRef;\n    this.onResolve = onResolve;\n    this.onReject = onReject;\n    this.intervalId = null;\n    this.sumDelay = 0;\n    this.position = 1;\n  }\n  init() {\n    this.addListeners();\n  }\n  addListeners() {\n    this.formRef.addEventListener('submit', this.onSubmitForm.bind(this));\n  }\n  onSubmitForm(event) {\n    event.preventDefault();\n\n    const {\n      elements: { delay, step, amount },\n    } = event.currentTarget;\n    const firstDelay = Number(delay.value);\n    const stepDelay = Number(step.value);\n    const amountValue = Number(amount.value);\n\n    setTimeout(() => {\n      this.sumDelay += firstDelay;\n      this.callCreatePromise()\n\n      this.intervalId = setInterval(() => {\n        this.position += 1;\n        this.sumDelay += stepDelay;\n\n        if (this.position > amountValue) {\n          this.clear();\n        } else {\n          this.callCreatePromise();\n        }\n      }, stepDelay);\n    }, firstDelay);\n  }\n  callCreatePromise() {\n    this.createPromise(this.position, this.sumDelay)\n      .then(this.onResolve.bind(this))\n      .catch(this.onReject.bind(this));\n  }\n  createPromise(position, delay) {\n    return new Promise((resolve, reject) => {\n      const shouldResolve = Math.random() > 0.3;\n\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    });\n  }\n  clear() {\n    clearInterval(this.intervalId);\n    this.intervalId = null;\n    this.sumDelay = 0;\n    this.position = 1;\n  }\n}\n\nconst settings = {\n  formRef: document.querySelector('.form'),\n  onResolve,\n  onReject,\n};\nnew Generator(settings).init();\n\n\nfunction onResolve({ position, delay }) {\n  Notiflix.Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n};\n\nfunction onReject({ position, delay }) {\n  Notiflix.Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n};"],"names":["Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","Generator","param","formRef","_$onResolve","onResolve","_$onReject","onReject","this","intervalId","sumDelay","position","addListeners","addEventListener","onSubmitForm","bind","event","preventDefault","_elements","currentTarget","elements","delay","step","amount","firstDelay","Number","stepDelay","amountValue","setTimeout","_this","callCreatePromise","setInterval","_this1","clear","createPromise","then","catch","Promise","resolve","reject","Math","random","clearInterval","document","querySelector","$parcel$interopDefault","$iU1Pc","Notify","success","concat","failure","init"],"version":3,"file":"03-promises.876d9fca.js.map"}